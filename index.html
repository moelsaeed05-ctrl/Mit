<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>MIT STORE</title>

<style>
body{
margin:0;
background:black;
color:white;
overflow:hidden;
font-family:Arial;
}

canvas{
position:fixed;
top:0;
left:0;
z-index:0;
}

/* Logo */
.logo{
position:absolute;
top:20px;
left:30px;
font-size:28px;
z-index:3;
}

/* Menu Icons */
.menu{
position:absolute;
top:45%;
left:50%;
transform:translate(-50%,-50%);
display:flex;
gap:60px;
font-size:30px;
z-index:3;
}

.menu div{
cursor:pointer;
transition:0.3s;
}

.menu div:hover{
transform:scale(1.2);
}

/* Candle */
#candle{
position:absolute;
font-size:40px;
z-index:4;
}

/* Human */
#human{
position:absolute;
width:40px;
height:80px;
background:rgba(0,0,0,0.9);
border-radius:10px;
z-index:4;
}

#human::before{
content:"";
position:absolute;
width:30px;
height:30px;
background:black;
border-radius:50%;
top:-25px;
left:5px;
}

/* Login Popup */
.popup{
position:fixed;
inset:0;
background:rgba(0,0,0,.9);
display:none;
justify-content:center;
align-items:center;
z-index:50;
}

.box{
background:#111;
padding:25px;
border-radius:12px;
width:260px;
text-align:center;
}

input{
width:90%;
padding:8px;
margin:5px;
}

button{
padding:8px 12px;
cursor:pointer;
background:#ffd700;
border:none;
border-radius:6px;
}

</style>
</head>

<body>

<canvas id="space"></canvas>

<div class="logo">MIT</div>

<div class="menu" id="menu">
<div onclick="openProducts('HOODIES')">ðŸ‘•</div>
<div onclick="openProducts('PANTS')">ðŸ‘–</div>
<div onclick="openProducts('ACCESSORIES')">âŒš</div>
</div>

<div id="candle">ðŸ•¯</div>
<div id="human"></div>

<!-- Popup -->
<div class="popup" id="popup">
<div class="box" id="popupContent"></div>
</div>

<script type="module">

import {initializeApp} from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
import {
getAuth,
createUserWithEmailAndPassword,
signInWithEmailAndPassword,
onAuthStateChanged,
GoogleAuthProvider,
signInWithPopup
} from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";

import {
getFirestore,
doc,
setDoc,
getDoc
} from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

/* Firebase Config */
const firebaseConfig={
apiKey:"YOUR_KEY",
authDomain:"YOUR_DOMAIN",
projectId:"YOUR_PROJECT",
appId:"YOUR_APP"
};

const app=initializeApp(firebaseConfig);
const auth=getAuth(app);
const db=getFirestore(app);

const provider=new GoogleAuthProvider();

/* Canvas Scene */
const canvas=document.getElementById("space");
const ctx=canvas.getContext("2d");

canvas.width=innerWidth;
canvas.height=innerHeight;

/* Stars */
let stars=[];
for(let i=0;i<180;i++){
stars.push({
x:Math.random()*canvas.width,
y:Math.random()*canvas.height,
speed:Math.random()*0.4+0.1
});
}

function drawStars(){
stars.forEach(s=>{
s.x-=s.speed;
if(s.x<0)s.x=canvas.width;
ctx.fillStyle="white";
ctx.fillRect(s.x,s.y,1,1);
});
}

/* Smoke Scene */
let smokes=[];
let timer=0;
let state="walk";
let humanX=-120;

function getArea(){
return document.getElementById("menu").getBoundingClientRect();
}

function createSmoke(x,y){
return{
x:x,
y:y,
r:15,
a:0.9,
vx:(Math.random()*2-1)*0.6,
vy:Math.random()*1.5+0.4
};
}

function drawSmoke(area){
smokes.forEach((s,i)=>{
s.x+=s.vx;
s.y-=s.vy;
s.r+=0.6;
s.a-=0.003;

let g=ctx.createRadialGradient(s.x,s.y,0,s.x,s.y,s.r);
g.addColorStop(0,`rgba(200,200,200,${s.a})`);
g.addColorStop(1,"rgba(0,0,0,0)");

ctx.fillStyle=g;
ctx.beginPath();
ctx.arc(s.x,s.y,s.r,0,Math.PI*2);
ctx.fill();

if(s.a<=0 || s.x<area.left || s.x>area.right){
smokes.splice(i,1);
}
});
}

function drawScene(){
ctx.clearRect(0,0,canvas.width,canvas.height);
drawStars();

const area=getArea();

/* Human */
let y=area.top+area.height/2;
humanX+=2;

let glow=ctx.createRadialGradient(humanX,y,0,humanX,y,120);
glow.addColorStop(0,"rgba(255,200,120,0.2)");
glow.addColorStop(1,"rgba(0,0,0,0)");

ctx.fillStyle=glow;
ctx.beginPath();
ctx.arc(humanX,y,80,0,Math.PI*2);
ctx.fill();

ctx.fillStyle="rgba(0,0,0,0.9)";
ctx.fillRect(humanX-15,y-10,30,60);

/* Candle */
let candle=document.getElementById("candle");
let cx=area.left+area.width/2;
let cy=area.top+area.height/2-40;

candle.style.left=(cx-15)+"px";
candle.style.top=(cy-40)+"px";

/* Animation Logic */
timer++;

if(state==="walk"){
if(humanX>cx-50){
state="light";
timer=0;
}
}

if(state==="light"){
if(timer>120){
state="blow";
timer=0;
}
}

if(state==="blow"){
if(timer<250){
if(Math.random()<0.5){
smokes.push(createSmoke(cx,cy));
}
}else{
state="walk";
humanX=-120;
timer=0;
smokes=[];
}
}

drawSmoke(area);

requestAnimationFrame(drawScene);
}

drawScene();

/* Products */
window.openProducts=function(name){
alert("Open products: "+name);
};

/* Login */
window.loginGoogle=async()=>{
await signInWithPopup(auth,provider);
popup.style.display="none";
};

</script>

</body>
</html>
