<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>MIT STORE</title>

<style>
*{margin:0;padding:0;box-sizing:border-box;font-family:Segoe UI Emoji,Arial}
body{background:black;color:white;overflow:hidden}

/* Canvas */
canvas{position:fixed;top:0;left:0;z-index:0}

/* Logo */
.logo{
position:absolute;
top:25px;
left:50%;
transform:translateX(-50%);
font-size:36px;
letter-spacing:6px;
z-index:10;
}
.yellow{color:#ffd700}
.red{color:#ff1a1a}

/* Menu */
.menu{
position:absolute;
top:50%;
left:50%;
transform:translate(-50%,-50%);
display:flex;
flex-direction:column;
gap:40px;
align-items:center;
z-index:10;
}
.item{
cursor:pointer;
font-size:22px;
letter-spacing:3px;
transition:.3s;
}
.item:hover{transform:scale(1.2)}

/* Auth Box */
.auth-box{
position:fixed;
bottom:20px;
left:50%;
transform:translateX(-50%);
background:#111;
padding:20px;
border-radius:15px;
width:300px;
display:flex;
flex-direction:column;
gap:10px;
z-index:30;
}
.auth-box input,
.auth-box button{
padding:8px;
border:none;
border-radius:8px;
}
.auth-box button{
background:#ffd700;
font-weight:bold;
cursor:pointer;
}
</style>
</head>
<body>

<canvas id="space"></canvas>

<div class="logo">
<span class="yellow">ùîê</span>
<span class="red">ùî¶</span>
<span class="yellow">ùîó</span>
</div>

<div class="menu">
<div class="item">üß• HOODIES</div>
<div class="item">üëñ PANTS</div>
<div class="item">‚åö ACCESSORIES</div>
</div>

<!-- AUTH SYSTEM -->
<div class="auth-box" id="authBox">
  <h3 id="authTitle">Login</h3>

  <input type="text" id="authName" placeholder="Full Name" style="display:none;">
  <input type="text" id="authPhone" placeholder="Phone Number" style="display:none;">

  <input type="email" id="authEmail" placeholder="Email">
  <input type="password" id="authPass" placeholder="Password">

  <button id="authBtn">Login</button>
  <button id="switchBtn">Create Account</button>
</div>

<script type="module">

/* ================= FIREBASE ================= */

import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
import {
  getAuth,
  createUserWithEmailAndPassword,
  signInWithEmailAndPassword,
  onAuthStateChanged,
  updateProfile,
  setPersistence,
  browserLocalPersistence
} from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";

import {
  getFirestore,
  doc,
  setDoc
} from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

const firebaseConfig = {
apiKey:"AIzaSyA1X_1BlviMDKKUGnA8yfG6NCrfS65h524",
authDomain:"mit-store-bd580.firebaseapp.com",
projectId:"mit-store-bd580",
storageBucket:"mit-store-bd580.firebasestorage.app",
messagingSenderId:"382577223227",
appId:"1:382577223227:web:113177bef81c5afb06de1e"
};

const app = initializeApp(firebaseConfig);
const auth = getAuth(app);
const db = getFirestore(app);

setPersistence(auth, browserLocalPersistence);

/* ================= CANVAS STARS ================= */

const canvas = document.getElementById("space");
const ctx = canvas.getContext("2d");

function resize(){
canvas.width = innerWidth;
canvas.height = innerHeight;
}
resize();
window.addEventListener("resize", resize);

let stars = [];
for(let i=0;i<250;i++){
stars.push({
x:Math.random()*canvas.width,
y:Math.random()*canvas.height,
speed:Math.random()*0.5+0.2
});
}

function animate(){
ctx.clearRect(0,0,canvas.width,canvas.height);

stars.forEach(s=>{
s.x-=s.speed;
if(s.x<0)s.x=canvas.width;
ctx.fillStyle="white";
ctx.fillRect(s.x,s.y,1,1);
});

requestAnimationFrame(animate);
}
animate();

/* ================= AUTH SYSTEM ================= */

const authBox = document.getElementById("authBox");
const authTitle = document.getElementById("authTitle");
const authName = document.getElementById("authName");
const authPhone = document.getElementById("authPhone");
const authEmail = document.getElementById("authEmail");
const authPass = document.getElementById("authPass");
const authBtn = document.getElementById("authBtn");
const switchBtn = document.getElementById("switchBtn");

let isLogin = true;

switchBtn.onclick = ()=>{
isLogin=!isLogin;

authTitle.innerText = isLogin ? "Login" : "Create Account";
authBtn.innerText = isLogin ? "Login" : "Create";
switchBtn.innerText = isLogin ? "Create Account" : "Back to Login";

authName.style.display = isLogin ? "none" : "block";
authPhone.style.display = isLogin ? "none" : "block";
};

authBtn.onclick = async ()=>{
try{
if(isLogin){
await signInWithEmailAndPassword(auth,authEmail.value,authPass.value);
alert("Logged in ‚úÖ");
}else{
const userCred = await createUserWithEmailAndPassword(auth,authEmail.value,authPass.value);

await updateProfile(userCred.user,{
displayName:authName.value
});

await setDoc(doc(db,"users",userCred.user.uid),{
name:authName.value,
phone:authPhone.value,
email:authEmail.value,
createdAt:new Date()
});

alert("Account Created üî•");
}
}catch(err){
alert(err.message);
}
};

onAuthStateChanged(auth,(user)=>{
if(user){
authBox.style.display="none";
}else{
authBox.style.display="flex";
}
});

</script>
</body>
</html>
