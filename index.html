<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>MIT STORE</title>

<style>
*{
    margin:0;
    padding:0;
    box-sizing:border-box;
    font-family:Arial, Helvetica, sans-serif;
}

body{
    overflow:hidden;
    background:black;
    color:white;
}

/* ===== Logo ===== */
.logo{
    position:absolute;
    top:25px;
    left:50%;
    transform:translateX(-50%);
    font-size:60px;
    letter-spacing:20px;
    font-weight:bold;
    z-index:10;
    white-space:nowrap;
}

.yellow{
    color:#ffd700;
    text-shadow:0 0 5px #ffd700,0 0 20px #ffae00,0 0 40px #ffae00;
}

.red{
    color:#ff1a1a;
    text-shadow:0 0 5px #ff1a1a,0 0 20px #ff0000,0 0 40px #ff0000;
}

/* ===== User Profile ===== */
#userArea{
    position:absolute;
    top:30px;
    right:40px;
    width:45px;
    height:45px;
    border-radius:50%;
    background:#ffd700;
    display:flex;
    align-items:center;
    justify-content:center;
    cursor:pointer;
    z-index:10;
    font-size:22px;
    color:black;
}

/* ===== Back Button ===== */
#backBtn{
    position:absolute;
    top:30px;
    left:30px;
    font-size:22px;
    background:#222;
    padding:8px 14px;
    border-radius:12px;
    cursor:pointer;
    display:none;
    z-index:20;
}

/* ===== Section Title ===== */
#sectionTitle{
    position:absolute;
    top:30px;
    left:80px;
    font-size:22px;
    letter-spacing:2px;
    z-index:15;
}

/* ===== Menu ===== */
.menu{
    position:absolute;
    top:50%;
    left:50%;
    transform:translate(-50%,-50%);
    display:flex;
    flex-direction:column;
    gap:40px;
    align-items:center;
    z-index:10;
}

.item{
    cursor:pointer;
    font-size:22px;
    letter-spacing:3px;
    padding:10px 25px;
    border-radius:15px;
    transition:0.3s;
}

.item:hover{
    transform:scale(1.2);
    text-shadow:0 0 10px #aaa,0 0 30px #777;
}

canvas{
    position:fixed;
    top:0;
    left:0;
}
</style>
</head>

<body>

<canvas id="space"></canvas>

<div class="logo">
    <span class="yellow">ùîê</span>
    <span class="red">ùî¶</span>
    <span class="yellow">ùîó</span>
</div>

<div id="sectionTitle"></div>

<div id="backBtn">‚¨Ö</div>

<div id="userArea">üë§</div>

<div class="menu">
    <div class="item" onclick="openSection('HOODIES')">HOODIES</div>
    <div class="item">PANTS</div>
    <div class="item">ACCESSORIES</div>
</div>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
import { getAuth, onAuthStateChanged, signOut } 
from "https://www.gstatic.com/firebasejs/10.12.2/firebase-auth.js";

const firebaseConfig = {
  apiKey: "AIzaSyA1X_1BlviMDKKUGnA8yfG6NCrfS65h524",
  authDomain: "mit-store-bd580.firebaseapp.com",
  projectId: "mit-store-bd580",
  storageBucket: "mit-store-bd580.firebaseapp.com",
  messagingSenderId: "382577223227",
  appId: "1:382577223227:web:a04cab6663731c1106de1e"
};

const app = initializeApp(firebaseConfig);
const auth = getAuth(app);

const userArea = document.getElementById("userArea");

onAuthStateChanged(auth, (user) => {

    if(user){
        userArea.innerHTML = "üë§";

        userArea.onclick = () => {
            alert(user.email);
        };

    } else {
        userArea.innerHTML = "üë§";

        userArea.onclick = () => {
            window.location.href = "auth.html";
        };
    }
});

/* ===== Canvas ===== */

const canvas = document.getElementById("space");
const ctx = canvas.getContext("2d");

canvas.width = innerWidth;
canvas.height = innerHeight;

let mode = "stars";

/* ===== Stars ===== */

let stars = [];
for (let i = 0; i < 250; i++) {
    stars.push({
        x: Math.random() * canvas.width,
        y: Math.random() * canvas.height,
        size: Math.random() * 1.5,
        speed: Math.random() * 0.4 + 0.1
    });
});

/* ===== Smoke ===== */

let smokes = [];
let smokeActive = false;

function createSmoke() {
    return {
        x: -60,
        y: Math.random() * canvas.height,
        radius: Math.random() * 60 + 40,
        alpha: 0.6,
        growth: Math.random()*0.5 + 0.3,
        speedX: Math.random()*2 + 1.5
    };
}

function drawSmoke() {

    if (smokeActive && Math.random() < 0.5) {
        smokes.push(createSmoke());
    }

    smokes.forEach((s, index) => {

        s.x += s.speedX;
        s.radius += s.growth;

        if(!smokeActive){
            s.alpha -= 0.01;
        }

        let gradient = ctx.createRadialGradient(
            s.x, s.y, 0,
            s.x, s.y, s.radius
        );

        gradient.addColorStop(0, `rgba(200,200,200,${s.alpha})`);
        gradient.addColorStop(1, "rgba(0,0,0,0)");

        ctx.fillStyle = gradient;
        ctx.beginPath();
        ctx.arc(s.x, s.y, s.radius, 0, Math.PI * 2);
        ctx.fill();

        if (s.alpha <= 0) {
            smokes.splice(index, 1);
        }
    });
}

const backBtn = document.getElementById("backBtn");
const sectionTitle = document.getElementById("sectionTitle");

window.openSection = function(name){

    mode = "smoke";
    smokeActive = true;

    sectionTitle.innerText = name;
    backBtn.style.display = "block";

    setTimeout(()=>{
        smokeActive = false;
    },8000);
};

backBtn.onclick = () => {
    mode = "stars";
    sectionTitle.innerText = "";
    backBtn.style.display = "none";
};

function animate(){
    ctx.clearRect(0,0,canvas.width,canvas.height);

    if(mode === "stars"){
        stars.forEach(s => {
            s.x -= s.speed;
            if (s.x < 0) s.x = canvas.width;

            ctx.fillStyle = "white";
            ctx.beginPath();
            ctx.arc(s.x, s.y, s.size, 0, Math.PI * 2);
            ctx.fill();
        });
    }

    if(mode === "smoke"){
        drawSmoke();
    }

    requestAnimationFrame(animate);
}

animate();

window.addEventListener("resize",()=>{
    canvas.width = innerWidth;
    canvas.height = innerHeight;
});
</script>

</body>
</html>
