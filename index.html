<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>MIT</title>

<style>
*{
    margin:0;
    padding:0;
    box-sizing:border-box;
    font-family:Arial, Helvetica, sans-serif;
}

body{
    overflow:hidden;
    background:black;
    color:white;
}

/* ===== Logo ===== */
.logo{
    position:absolute;
    top:25px;
    left:50%;
    transform:translateX(-50%);
    font-size:40px;
    letter-spacing:8px;
    font-weight:bold;
    z-index:10;
    white-space:nowrap;
}

@media(max-width:480px){
    .logo{
        font-size:32px;
        letter-spacing:5px;
    }
}

.yellow{
    color:#ffd700;
    text-shadow:0 0 5px #ffd700,0 0 20px #ffae00;
}

.red{
    color:#ff1a1a;
    text-shadow:0 0 5px #ff1a1a,0 0 20px #ff0000;
}

/* ===== Profile ===== */
.profile{
    position:absolute;
    top:20px;
    left:20px;
    width:55px;
    height:55px;
    border-radius:50%;
    overflow:hidden;
    border:2px solid #ffd700;
    cursor:pointer;
    z-index:20;
}

.profile img{
    width:100%;
    height:100%;
    object-fit:cover;
}

/* ===== Menu ===== */
.menu{
    position:absolute;
    top:50%;
    left:50%;
    transform:translate(-50%,-50%);
    display:flex;
    flex-direction:column;
    gap:40px;
    align-items:center;
    z-index:10;
}

.item{
    cursor:pointer;
    font-size:22px;
    letter-spacing:3px;
    padding:10px 25px;
    border-radius:15px;
    transition:0.3s;
}

.item:hover{
    transform:scale(1.2);
}

/* ===== Section Title ===== */
.section-title{
    position:absolute;
    top:90px;
    left:50%;
    transform:translateX(-50%);
    font-size:20px;
    letter-spacing:3px;
    color:#ffd700;
    display:none;
    z-index:10;
}

/* ===== Auth Box ===== */
.authBox{
    position:absolute;
    bottom:20px;
    left:50%;
    transform:translateX(-50%);
    display:flex;
    flex-direction:column;
    gap:8px;
    width:260px;
    z-index:20;
}

.authBox input{
    padding:8px;
    border:none;
    border-radius:8px;
}

.authBox button{
    padding:8px;
    border:none;
    border-radius:8px;
    cursor:pointer;
    background:#ffd700;
    font-weight:bold;
}
canvas{
    position:fixed;
    top:0;
    left:0;
}
</style>
</head>

<body>

<canvas id="space"></canvas>

<div class="profile">
    <img id="profileImg" src="https://via.placeholder.com/100">
</div>

<div class="logo">
    <span class="yellow">ùîê</span>
    <span class="red">ùî¶</span>
    <span class="yellow">ùîó</span>
</div>

<div class="section-title" id="sectionTitle"></div>

<div class="menu">
    <div class="item" data-name="HOODIES">HOODIES</div>
    <div class="item" data-name="PANTS">PANTS</div>
    <div class="item" data-name="ACCESSORIES">ACCESSORIES</div>
</div>

<div class="authBox">
    <input id="username" placeholder="Username">
    <input id="email" type="email" placeholder="Email">
    <input id="password" type="password" placeholder="Password">
    <button onclick="signUp()">Sign Up</button>
    <button onclick="login()">Login</button>
    <button onclick="googleLogin()">Login with Google</button>
    <button onclick="logout()">Logout</button>
</div>

<script type="module">

import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
import { 
  getAuth,
  createUserWithEmailAndPassword,
  signInWithEmailAndPassword,
  GoogleAuthProvider,
  signInWithPopup,
  onAuthStateChanged,
  updateProfile,
  signOut
} from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";

import { 
  getFirestore,
  doc,
  setDoc
} from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

/* ===== Firebase Config ===== */
const firebaseConfig = {
  apiKey: "AIzaSyA1X_1BlviMDKKUGnA8yfG6NCrfS65h524",
  authDomain: "mit-store-bd580.firebaseapp.com",
  projectId: "mit-store-bd580",
  storageBucket: "mit-store-bd580.firebasestorage.app",
  messagingSenderId: "382577223227",
  appId: "1:382577223227:web:113177bef81c5afb06de1e"
};

const app = initializeApp(firebaseConfig);
const auth = getAuth(app);
const db = getFirestore(app);

/* ===== Sign Up ===== */
window.signUp = async function(){
  const email = email.value;
  const password = password.value;
  const username = username.value;

  try{
    const userCred = await createUserWithEmailAndPassword(auth,email,password);
    await updateProfile(userCred.user,{displayName:username});

    await setDoc(doc(db,"users",userCred.user.uid),{
      name: username,
      email: email,
      photo: userCred.user.photoURL || ""
    });

    alert("Account Created üî•");
  }catch(error){
    alert(error.message);
  }
}

/* ===== Login ===== */
window.login = async function(){
  try{
    await signInWithEmailAndPassword(auth,email.value,password.value);
    alert("Welcome Back üî•");
  }catch(error){
    alert(error.message);
  }
}

/* ===== Google Login ===== */
window.googleLogin = async function(){
  const provider = new GoogleAuthProvider();
  try{
    const result = await signInWithPopup(auth,provider);

    await setDoc(doc(db,"users",result.user.uid),{
      name: result.user.displayName,
      email: result.user.email,
      photo: result.user.photoURL
    });

  }catch(error){
    alert(error.message);
  }
}

/* ===== Logout ===== */
window.logout = function(){
  signOut(auth);
}

/* ===== Check Login ===== */
onAuthStateChanged(auth,(user)=>{
  if(user && user.photoURL){
    document.getElementById("profileImg").src = user.photoURL;
  }
});

/* ===== Section Hover ===== */
document.querySelectorAll(".item").forEach(item=>{
    item.addEventListener("touchstart",()=>{
        sectionTitle.style.display="block";
        sectionTitle.innerText=item.dataset.name;
    });
});

</script>

</body>
</html>
