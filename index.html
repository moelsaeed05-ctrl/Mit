<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>MIT STORE</title>

<style>
*{margin:0;padding:0;box-sizing:border-box;font-family:Arial}
body{background:black;color:white;overflow:hidden}
#space{position:fixed;inset:0;z-index:0}
.logo{position:absolute;top:20px;left:50%;transform:translateX(-50%);font-size:28px;letter-spacing:6px;z-index:10}
.loginBtn{position:absolute;top:20px;right:20px;background:#ffd700;color:black;padding:6px 14px;border-radius:8px;cursor:pointer;z-index:10;font-weight:bold}
.menu{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);display:flex;flex-direction:column;gap:30px;z-index:10}
.item{cursor:pointer;font-size:22px;padding:12px 30px;border-radius:12px;transition:.3s}
.item:hover{text-shadow:0 0 10px #ffd700}
.fullscreen{position:fixed;inset:0;background:black;display:none;flex-direction:column;align-items:center;z-index:20;padding-top:80px;overflow:auto}
.products{display:flex;gap:20px;flex-wrap:wrap;justify-content:center;width:95%}
.product{background:#111;padding:12px;border-radius:14px;width:150px;cursor:pointer;transition:.3s;text-align:center}
.product img{width:100%;border-radius:8px;margin-bottom:8px}
.product:hover{transform:scale(1.05);box-shadow:0 0 10px #ffd700}
.smokeCanvas{position:absolute;inset:0;z-index:1;pointer-events:none}
.categoryTitle{font-size:26px;margin-bottom:20px;z-index:5}
.closeX{position:absolute;top:20px;left:20px;font-size:22px;cursor:pointer;color:red}
.detail{position:fixed;inset:0;background:rgba(0,0,0,.95);display:none;justify-content:center;align-items:center;z-index:30}
.detailBox{background:#111;padding:25px;border-radius:18px;width:300px;text-align:center}
.loginModal{position:fixed;inset:0;background:rgba(0,0,0,.9);display:none;justify-content:center;align-items:center;z-index:40}
.loginBox{background:#111;padding:30px;border-radius:18px;width:320px;text-align:center}
.loginBox input{width:100%;padding:10px;margin:8px 0;border:none;border-radius:6px;background:#222;color:white}
button{padding:10px;margin-top:10px;border:none;border-radius:8px;background:#ffd700;cursor:pointer;width:100%}
.neon{position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);background:#111;padding:20px 40px;border-radius:15px;display:none;color:#00ffcc;box-shadow:0 0 20px #00ffcc;z-index:100}
</style>
</head>

<body>

<canvas id="space"></canvas>
<div class="neon" id="neon"></div>

<div class="logo">MIT STORE</div>
<div class="loginBtn" id="loginBtn">ÿ™ÿ≥ÿ¨ŸäŸÑ ÿßŸÑÿØÿÆŸàŸÑ</div>

<div class="menu">
<div class="item" onclick="openCategory('HOODIES')">HOODIES</div>
<div class="item" onclick="openCategory('PANTS')">PANTS</div>
<div class="item" onclick="openCategory('ACCESSORIES')">ACCESSORIES</div>
</div>

<div class="fullscreen" id="page">
<div class="closeX" onclick="goHome()">‚úñ</div>
<canvas class="smokeCanvas" id="smoke"></canvas>
<div class="categoryTitle" id="categoryTitle"></div>
<div class="products" id="products"></div>
</div>

<div class="detail" id="detail">
<div class="detailBox" id="detailBox"></div>
</div>

<div class="loginModal" id="loginModal">
<div class="loginBox">
<h3>ÿ™ÿ≥ÿ¨ŸäŸÑ ÿØÿÆŸàŸÑ / ÿ•ŸÜÿ¥ÿßÿ° ÿ≠ÿ≥ÿßÿ®</h3>
<input type="email" id="email" placeholder="ÿßŸÑÿ®ÿ±ŸäÿØ ÿßŸÑÿ•ŸÑŸÉÿ™ÿ±ŸàŸÜŸä">
<input type="password" id="password" placeholder="ŸÉŸÑŸÖÿ© ÿßŸÑŸÖÿ±Ÿàÿ±">
<button onclick="login()">ÿØÿÆŸàŸÑ</button>
<button onclick="register()">ÿ•ŸÜÿ¥ÿßÿ° ÿ≠ÿ≥ÿßÿ®</button>
</div>
</div>

<script type="module">

import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
import { getAuth, createUserWithEmailAndPassword, signInWithEmailAndPassword, onAuthStateChanged, signOut }
from "https://www.gstatic.com/firebasejs/10.12.2/firebase-auth.js";
import { getFirestore, collection, getDocs, query, where }
from "https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";

/* üî• ÿ∂ÿπ ÿ®ŸäÿßŸÜÿßÿ™ŸÉ ŸáŸÜÿß */
const firebaseConfig = YOUR_CONFIG_HERE;

const app = initializeApp(firebaseConfig);
const auth = getAuth(app);
const db = getFirestore(app);

const loginBtn = document.getElementById("loginBtn");
const neon = document.getElementById("neon");

function showMsg(msg){
neon.innerText = msg;
neon.style.display="block";
setTimeout(()=>neon.style.display="none",3000);
}

/* üîê ÿ™ÿ≥ÿ¨ŸäŸÑ ÿØÿÆŸàŸÑ */
window.login = async ()=>{
try{
await signInWithEmailAndPassword(auth,email.value,password.value);
showMsg("ÿ™ŸÖ ÿ™ÿ≥ÿ¨ŸäŸÑ ÿßŸÑÿØÿÆŸàŸÑ");
loginModal.style.display="none";
}catch{showMsg("ÿ®ŸäÿßŸÜÿßÿ™ ÿ∫Ÿäÿ± ÿµÿ≠Ÿäÿ≠ÿ©")}
};

/* üîê ÿ•ŸÜÿ¥ÿßÿ° ÿ≠ÿ≥ÿßÿ® */
window.register = async ()=>{
if(password.value.length<6){showMsg("ŸÉŸÑŸÖÿ© ÿßŸÑŸÖÿ±Ÿàÿ± ÿ∂ÿπŸäŸÅÿ©");return;}
try{
await createUserWithEmailAndPassword(auth,email.value,password.value);
showMsg("ÿ™ŸÖ ÿ•ŸÜÿ¥ÿßÿ° ÿßŸÑÿ≠ÿ≥ÿßÿ®");
loginModal.style.display="none";
}catch{showMsg("ÿÆÿ∑ÿ£ ŸÅŸä ÿßŸÑÿ™ÿ≥ÿ¨ŸäŸÑ")}
};

loginBtn.onclick=()=>{
if(auth.currentUser){
signOut(auth);
showMsg("ÿ™ŸÖ ÿ™ÿ≥ÿ¨ŸäŸÑ ÿßŸÑÿÆÿ±Ÿàÿ¨");
}else{
loginModal.style.display="flex";
}
};

onAuthStateChanged(auth,user=>{
loginBtn.innerText=user?"ÿ™ÿ≥ÿ¨ŸäŸÑ ÿÆÿ±Ÿàÿ¨":"ÿ™ÿ≥ÿ¨ŸäŸÑ ÿßŸÑÿØÿÆŸàŸÑ";
});

/* üõç ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑŸÖŸÜÿ™ÿ¨ÿßÿ™ */
window.openCategory = async(cat)=>{
page.style.display="flex";
categoryTitle.innerText=cat;
products.innerHTML="";

const q = query(collection(db,"products"), where("category","==",cat));
const snap = await getDocs(q);

snap.forEach(doc=>{
const p=doc.data();
products.innerHTML+=`
<div class="product" onclick="showDetail('${p.name}','${p.image}','${p.price}')">
<img src="${p.image}">
<div>${p.name}</div>
<div style="color:#ffd700">${p.price}$</div>
</div>`;
});
};

window.showDetail=(n,i,p)=>{
detail.style.display="flex";
detailBox.innerHTML=`
<h3>${n}</h3>
<img src="${i}" style="width:100%;margin:15px 0;border-radius:10px">
<div style="color:#ffd700">${p}$</div>
<button onclick="detail.style.display='none'">ÿ•ÿ∫ŸÑÿßŸÇ</button>`;
};

window.goHome=()=>page.style.display="none";

/* ‚≠ê ÿßŸÑŸÜÿ¨ŸàŸÖ */
const canvas=document.getElementById("space");
const ctx=canvas.getContext("2d");
function resize(){
canvas.width=innerWidth;
canvas.height=innerHeight;
}
resize();
window.addEventListener("resize",resize);

let stars=[];
for(let i=0;i<200;i++){
stars.push({x:Math.random()*canvas.width,y:Math.random()*canvas.height,s:Math.random()*0.5+0.2});
}

function animateStars(){
ctx.clearRect(0,0,canvas.width,canvas.height);
stars.forEach(st=>{
st.x-=st.s;
if(st.x<0)st.x=canvas.width;
ctx.fillStyle="white";
ctx.fillRect(st.x,st.y,1.5,1.5);
});
requestAnimationFrame(animateStars);
}
animateStars();

/* üå´ ÿßŸÑÿØÿÆÿßŸÜ */
const smokeCanvas=document.getElementById("smoke");
const smokeCtx=smokeCanvas.getContext("2d");
function resizeSmoke(){
smokeCanvas.width=innerWidth;
smokeCanvas.height=innerHeight;
}
resizeSmoke();
window.addEventListener("resize",resizeSmoke);

let smokes=[];
function createSmoke(){
return{x:Math.random()*innerWidth,y:Math.random()*innerHeight,r:Math.random()*120+50,a:0.3};
}

function animateSmoke(){
smokeCtx.clearRect(0,0,innerWidth,innerHeight);
if(Math.random()<0.3)smokes.push(createSmoke());
smokes.forEach((s,i)=>{
s.a-=0.002;
let g=smokeCtx.createRadialGradient(s.x,s.y,0,s.x,s.y,s.r);
g.addColorStop(0,`rgba(200,200,200,${s.a})`);
g.addColorStop(1,"transparent");
smokeCtx.fillStyle=g;
smokeCtx.beginPath();
smokeCtx.arc(s.x,s.y,s.r,0,Math.PI*2);
smokeCtx.fill();
if(s.a<=0)smokes.splice(i,1);
});
requestAnimationFrame(animateSmoke);
}
animateSmoke();

</script>
</body>
</html>
