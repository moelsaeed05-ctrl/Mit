<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>MIT STORE</title>

<style>
*{margin:0;padding:0;box-sizing:border-box;font-family:Arial, sans-serif;}
body{background:black;color:white;overflow-x:hidden; position: relative;}

#space{
position:fixed;
inset:0;
z-index:0;
pointer-events:none;
}

/* Logo */
.logo{
position:absolute;
top:30px;
left:50%;
transform:translateX(-50%);
font-size:28px;
letter-spacing:6px;
z-index:10;
}

/* Menu Icon */
.menuIcon {
position: fixed;
top: 25px;
right: 25px;
font-size: 30px;
cursor: pointer;
z-index: 100;
color: #ffd700;
}

/* Sidebar */
.sidebar {
position: fixed;
top: 0;
right: -280px;
width: 260px;
height: 100%;
background: rgba(15,15,15,.98);
backdrop-filter: blur(10px);
z-index: 200;
transition: .4s;
padding: 80px 20px;
box-shadow:-5px 0 20px rgba(0,0,0,.8);
}
.sidebar.active{right:0;}

.sideItem{
padding:15px;
margin-bottom:10px;
border-radius:10px;
cursor:pointer;
font-size:18px;
display:flex;
align-items:center;
gap:15px;
transition:.3s;
background:rgba(255,255,255,.05);
}
.sideItem:hover{background:#ffd700;color:black;}

/* Cart Badge */
.cartBadge{
background:red;
color:white;
padding:2px 8px;
border-radius:50%;
margin-right:10px;
font-size:14px;
}

/* Menu */
.menu{
position:absolute;
top:60%;
left:50%;
transform:translate(-50%,-50%);
display:flex;
flex-direction:column;
gap:30px;
z-index:10;
width:80%;
align-items:center;
}

.item{
cursor:pointer;
font-size:24px;
padding:12px 20px;
transition:.4s;
border-bottom:2px solid transparent;
}
.item:hover{text-shadow:0 0 15px #ffd700;border-bottom:2px solid #ffd700;}

/* Neon Message */
.neonMessage{
position:fixed;
top:50%;
left:50%;
transform:translate(-50%,-50%);
padding:20px 40px;
border-radius:15px;
background:#111;
font-size:20px;
display:none;
z-index:1000;
color:#00ffcc;
box-shadow:0 0 25px #00ffcc;
}

/* Fullscreen Page */
.fullscreen{
position:fixed;
inset:0;
background:black;
display:none;
flex-direction:column;
align-items:center;
z-index:40;
padding-top:100px;
overflow:auto;
}

.products{
display:flex;
gap:20px;
flex-wrap:wrap;
justify-content:center;
width:95%;
z-index:5;
}

.product{
background:#111;
padding:12px;
border-radius:14px;
width:150px;
cursor:pointer;
transition:.4s;
text-align:center;
}
.product img{width:100%;border-radius:8px;}
.product:hover{transform:scale(1.05);box-shadow:0 0 18px #ffd700;}

.smokeCanvas{
position:absolute;
inset:0;
z-index:1;
pointer-events:none;
}

.detail{
position:fixed;
inset:0;
background:rgba(0,0,0,.9);
display:none;
justify-content:center;
align-items:center;
z-index:500;
}

.detailBox{
background:#111;
padding:25px;
border-radius:18px;
text-align:center;
width:320px;
}

.loginModal{
position:fixed;
inset:0;
background:rgba(0,0,0,.9);
display:none;
justify-content:center;
align-items:center;
z-index:600;
}

.loginBox{
background:#111;
padding:30px;
border-radius:18px;
width:320px;
text-align:center;
position:relative;
}

.loginBox input{
width:100%;
padding:12px;
margin:8px 0;
border-radius:6px;
background:#222;
color:white;
border:none;
text-align:center;
}

button{
padding:12px;
margin-top:10px;
border:none;
border-radius:8px;
background:#ffd700;
color:black;
font-weight:bold;
cursor:pointer;
width:100%;
}

.closeX{
position:absolute;
top:15px;
left:15px;
font-size:25px;
cursor:pointer;
color:#ff4444;
}

.categoryTitle{
font-size:26px;
margin-bottom:20px;
color:#ffd700;
}
</style>
</head>

<body>

<canvas id="space"></canvas>
<div class="neonMessage" id="neonMsg"></div>

<div class="logo">
<span style="color:#ffd700">ğ”</span>
<span style="color:#ff1a1a">ğ”¦</span>
<span style="color:#ffd700">ğ”—</span>
</div>

<div class="menuIcon" onclick="toggleSidebar()">â˜°</div>

<div class="sidebar" id="sidebar">
<div class="closeX" onclick="toggleSidebar()">Ã—</div>

<div class="sideItem" id="loginBtnSide" onclick="openLogin();toggleSidebar()">
ğŸ‘¤ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„
</div>

<div class="sideItem" onclick="openCart();toggleSidebar()">
ğŸ›’ Ø§Ù„Ø³Ù„Ø© <span id="cartCount" class="cartBadge">0</span>
</div>

<div class="sideItem" onclick="openOrders();toggleSidebar()">
ğŸ“œ Ø§Ù„Ø·Ù„Ø¨Ø§Øª
</div>

<div class="sideItem" id="logoutBtn" style="display:none" onclick="handleLogout()">
ğŸšª ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬
</div>

</div>

<div class="menu">
<div class="item" onclick="openCategory('HOODIES')">HOODIES</div>
<div class="item" onclick="openCategory('PANTS')">PANTS</div>
<div class="item" onclick="openCategory('ACCESSORIES')">ACCESSORIES</div>
</div>

<div class="fullscreen" id="page">
<div class="closeX" onclick="goHome()">âœ–</div>
<canvas class="smokeCanvas" id="smoke"></canvas>
<div class="categoryTitle" id="categoryTitle"></div>
<div class="products" id="products"></div>
</div>

<div class="detail" id="detail">
<div class="detailBox" id="detailBox"></div>
</div>

<div class="loginModal" id="loginModal">
<div class="loginBox">
<div class="closeX" onclick="closeLogin()">âœ–</div>

<div id="loginForm">
<h3>ØªØ³Ø¬ÙŠÙ„ Ø¯Ø®ÙˆÙ„</h3>
<input type="email" id="emailInput" placeholder="Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ">
<input type="password" id="passwordInput" placeholder="ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±">
<button onclick="login()">Ø¯Ø®ÙˆÙ„</button>
<span style="color:#ffd700;cursor:pointer;" onclick="showRegister()">Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨</span>
</div>

<div id="registerForm" style="display:none">
<h3>Ø­Ø³Ø§Ø¨ Ø¬Ø¯ÙŠØ¯</h3>
<input type="text" id="nameInput" placeholder="Ø§Ù„Ø§Ø³Ù…">
<input type="email" id="regEmailInput" placeholder="Ø§Ù„Ø§ÙŠÙ…ÙŠÙ„">
<input type="password" id="regPasswordInput" placeholder="Ø§Ù„Ø¨Ø§Ø³ÙˆØ±Ø¯">
<button onclick="register()">Ø¥Ù†Ø´Ø§Ø¡</button>
<span style="color:#ffd700;cursor:pointer;" onclick="showLogin()">Ø±Ø¬ÙˆØ¹</span>
</div>

</div>
</div>

<script type="module">
import {initializeApp} from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
import {getAuth,createUserWithEmailAndPassword,signInWithEmailAndPassword,onAuthStateChanged,signOut} from "https://www.gstatic.com/firebasejs/10.12.2/firebase-auth.js";
import {getFirestore,doc,setDoc,getDoc,collection,query,getDocs,deleteDoc} from "https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";

const firebaseConfig={
apiKey:"AIzaSyC6606N-AgsVjpUfubQa9ZRvYtOZvCU",
authDomain:"mit-store-15e1d.firebaseapp.com",
projectId:"mit-store-15e1d",
storageBucket:"mit-store-15e1d.firebasestorage.app",
appId:"1:168416523904:web:6bd0ea50fc3e1c542e9865"
};

const app=initializeApp(firebaseConfig);
const auth=getAuth(app);
const db=getFirestore(app);

let currentUser=null;
let cartData=[];

/* UI Functions */
window.toggleSidebar=()=>sidebar.classList.toggle("active");
window.openLogin=()=>loginModal.style.display="flex";
window.closeLogin=()=>loginModal.style.display="none";
window.showRegister=()=>{loginForm.style.display="none";registerForm.style.display="block";}
window.showLogin=()=>{registerForm.style.display="none";loginForm.style.display="block";}
window.goHome=()=>page.style.display="none";

window.showNeon=function(text){
neonMsg.innerText=text;
neonMsg.style.display="block";
setTimeout(()=>neonMsg.style.display="none",2500);
}

/* Auth */
window.login=async function(){
try{
await signInWithEmailAndPassword(auth,emailInput.value,passwordInput.value);
showNeon("Ø£Ù‡Ù„Ø§Ù‹ Ø¨Ùƒ Ù…Ø¬Ø¯Ø¯Ø§Ù‹");
closeLogin();
}catch{
showNeon("Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª");
}
}

window.register=async function(){
const name=nameInput.value;
const email=regEmailInput.value;
const password=regPasswordInput.value;

if(!name||!email||!password){
showNeon("Ø§Ù…Ù„Ø£ ÙƒÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª");
return;
}

try{
const userCredential=await createUserWithEmailAndPassword(auth,email,password);

await setDoc(doc(db,"users",userCredential.user.uid),{
name,email,createdAt:new Date()
});

showNeon("ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø­Ø³Ø§Ø¨");
closeLogin();

}catch{
showNeon("Ø®Ø·Ø£ ÙÙŠ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø­Ø³Ø§Ø¨");
}
}

window.handleLogout=async()=>{
await signOut(auth);
showNeon("ØªÙ… Ø§Ù„Ø®Ø±ÙˆØ¬");
toggleSidebar();
}

/* Auth State */
onAuthStateChanged(auth,async user=>{
currentUser=user;

if(user){
const snap=await getDoc(doc(db,"users",user.uid));

loginBtnSide.innerHTML=`ğŸ‘¤ ${snap.exists()?snap.data().name:"Ù…Ø³ØªØ®Ø¯Ù…"}`;
logoutBtn.style.display="flex";

loadCart();

}else{
loginBtnSide.innerHTML="ğŸ‘¤ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„";
logoutBtn.style.display="none";
cartCount.innerText="0";
}
});

/* Stars Animation */
const canvas=space;
const ctx=canvas.getContext("2d");
canvas.width=innerWidth;
canvas.height=innerHeight;

let stars=Array.from({length:250},()=>({
x:Math.random()*canvas.width,
y:Math.random()*canvas.height,
s:Math.random()*0.7
}));

function animateStars(){
ctx.clearRect(0,0,canvas.width,canvas.height);

stars.forEach(st=>{
st.x-=st.s;
if(st.x<0) st.x=canvas.width;

ctx.fillStyle="white";
ctx.fillRect(st.x,st.y,1.5,1.5);
});

requestAnimationFrame(animateStars);
}
animateStars();

/* Strong Smoke Effect */
const smokeCanvas=smoke;
const smokeCtx=smokeCanvas.getContext("2d");

smokeCanvas.width=innerWidth;
smokeCanvas.height=innerHeight;

let smokes=[];

function animateSmoke(){
smokeCtx.clearRect(0,0,innerWidth,innerHeight);

/* ÙƒØ«Ø§ÙØ© Ø¯Ø®Ø§Ù† Ø£Ø¹Ù„Ù‰ */
if(Math.random()<0.25){
smokes.push({
x:Math.random()*innerWidth,
y:Math.random()*innerHeight,
r:Math.random()*120+60,
a:0.35
});
}

smokes.forEach((s,i)=>{
s.a-=0.002;

let g=smokeCtx.createRadialGradient(s.x,s.y,0,s.x,s.y,s.r);
g.addColorStop(0,`rgba(120,120,120,${s.a})`);
g.addColorStop(1,"transparent");

smokeCtx.fillStyle=g;
smokeCtx.beginPath();
smokeCtx.arc(s.x,s.y,s.r,0,Math.PI*2);
smokeCtx.fill();

if(s.a<=0) smokes.splice(i,1);
});

requestAnimationFrame(animateSmoke);
}
animateSmoke();

/* Products */
const data={
HOODIES:[{name:"Black Hoodie",img:"https://images.unsplash.com/photo-1618354691373-d851c5c3a990",price:"50$"}],
PANTS:[{name:"Black Pants",img:"https://images.unsplash.com/photo-1584865288642-42078afe6942",price:"40$"}],
ACCESSORIES:[{name:"Cap",img:"https://images.unsplash.com/photo-1512436991641-6745cdb1723f",price:"20$"}]
};

window.openCategory=function(cat){
page.style.display="flex";
products.innerHTML="";
categoryTitle.innerText=cat;

data[cat].forEach(p=>{
products.innerHTML+=`
<div class="product" onclick='showDetail("${p.name}","${p.img}","${p.price}")'>
<img src="${p.img}">
<div>${p.name}</div>
<div style="color:#ffd700">${p.price}</div>
</div>`;
});
}

/* Cart System */
window.addToCart=async function(name,img,price){

if(!currentUser){
showNeon("Ø³Ø¬Ù„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø£ÙˆÙ„Ø§Ù‹");
return;
}

const cartRef=doc(db,"users",currentUser.uid,"cart",Date.now().toString());

await setDoc(cartRef,{name,img,price,time:new Date()});

showNeon("ØªÙ…Øª Ø§Ù„Ø¥Ø¶Ø§ÙØ© Ù„Ù„Ø³Ù„Ø©");
loadCart();

/* Ø§Ù†ÙØ¬Ø§Ø± Ø¯Ø®Ø§Ù† Ø¥Ø¶Ø§ÙÙŠ */
for(let i=0;i<25;i++){
smokes.push({
x:Math.random()*innerWidth,
y:Math.random()*innerHeight,
r:Math.random()*150,
a:0.5
});
}
}

/* Load Cart */
window.loadCart=async function(){

if(!currentUser) return;

const q=query(collection(db,"users",currentUser.uid,"cart"));
const snap=await getDocs(q);

cartData=[];
snap.forEach(doc=>cartData.push({...doc.data(),id:doc.id}));

cartCount.innerText=cartData.length;
}

/* Open Cart */
window.openCart=function(){
let html="<h2 style='margin-bottom:20px'>Ø§Ù„Ø³Ù„Ø©</h2>";

cartData.forEach(item=>{
html+=`
<div style="background:#111;padding:12px;border-radius:10px;margin:10px 0;text-align:center">
<img src="${item.img}" style="width:100px;border-radius:8px"><br>
${item.name}<br>
<span style="color:#ffd700">${item.price}</span><br>
<button onclick="removeCart('${item.id}')">Ø­Ø°Ù</button>
</div>`;
});

detailBox.innerHTML=html;
detail.style.display="flex";
}

/* Orders */
window.openOrders=function(){
showNeon("Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø·Ù„Ø¨Ø§Øª Ø­Ø§Ù„ÙŠØ§Ù‹");
}

window.removeCart=async function(id){

await deleteDoc(doc(db,"users",currentUser.uid,"cart",id));
showNeon("ØªÙ… Ø§Ù„Ø­Ø°Ù");
loadCart();
}

window.showDetail=function(n,i,p){
detail.style.display="flex";

detailBox.innerHTML=`
<div class="closeX" onclick="detail.style.display='none'">âœ–</div>
<img src="${i}" style="width:100%;border-radius:10px">
<h3 style="margin:10px 0">${n}</h3>
<div style="color:#ffd700;font-size:20px;margin-bottom:10px">${p}</div>
<button onclick='addToCart("${n}","${i}","${p}")'>Ø¥Ø¶Ø§ÙØ© Ø¥Ù„Ù‰ Ø§Ù„Ø³Ù„Ø©</button>
`;
}
</script>

</body>
</html>
