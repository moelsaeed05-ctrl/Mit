<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>MIT STORE</title>

<style>
*{margin:0;padding:0;box-sizing:border-box;font-family:Arial}
body{background:black;color:white;overflow:hidden}

/* Logo */
.logo{
position:absolute;
top:25px;
left:50%;
transform:translateX(-50%);
font-size:36px;
letter-spacing:6px;
z-index:10;
}

/* Login Button */
.loginBtn{
position:absolute;
top:25px;
right:40px;
background:#ffd700;
color:black;
padding:8px 18px;
border-radius:8px;
cursor:pointer;
z-index:10;
font-weight:bold;
}

/* User Info */
.userInfo{
position:absolute;
top:25px;
right:40px;
z-index:10;
display:none;
}

/* Modal */
.modal{
position:fixed;
inset:0;
background:rgba(0,0,0,.9);
display:none;
justify-content:center;
align-items:center;
z-index:100;
}

.modalBox{
background:#111;
padding:30px;
border-radius:18px;
width:300px;
text-align:center;
}

input{
width:100%;
padding:10px;
margin-top:10px;
border-radius:8px;
border:none;
}

button{
padding:10px;
margin-top:15px;
border:none;
border-radius:8px;
background:#ffd700;
cursor:pointer;
width:100%;
}
</style>
</head>

<body>

<div class="logo">
<span style="color:#ffd700">ùîê</span>
<span style="color:#ff1a1a">ùî¶</span>
<span style="color:#ffd700">ùîó</span>
</div>

<div class="loginBtn" id="loginBtn">LOGIN</div>

<div class="userInfo" id="userInfo">
<span id="userEmail"></span>
<button onclick="logout()" style="width:auto;padding:6px 12px;margin-left:10px">Logout</button>
</div>

<!-- Login Modal -->
<div class="modal" id="authModal">
<div class="modalBox">
<h3 id="modalTitle">Login</h3>
<input type="email" id="email" placeholder="Email">
<input type="password" id="password" placeholder="Password">
<button onclick="login()">Login</button>
<button onclick="register()">Create Account</button>
<button onclick="closeModal()">Close</button>
</div>
</div>

<script type="module">

/* ===========================
   FIREBASE IMPORT
=========================== */

import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
import { getAnalytics } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-analytics.js";
import { getAuth, createUserWithEmailAndPassword, signInWithEmailAndPassword, signOut, onAuthStateChanged } 
from "https://www.gstatic.com/firebasejs/10.12.2/firebase-auth.js";

/* ===========================
   FIREBASE CONFIG
=========================== */

const firebaseConfig = {
  apiKey: "AIzaSyC6606N-AgsVjpUfubQa9ZRb7VjYtOZvCU",
  authDomain: "mit-store-15e1d.firebaseapp.com",
  projectId: "mit-store-15e1d",
  storageBucket: "mit-store-15e1d.firebasestorage.app",
  messagingSenderId: "168416523904",
  appId: "1:168416523904:web:6bd0ea50fc3e1c542e9865",
  measurementId: "G-3MMQMGS7TP"
};

const app = initializeApp(firebaseConfig);
const analytics = getAnalytics(app);
const auth = getAuth(app);

/* ===========================
   UI ELEMENTS
=========================== */

const authModal=document.getElementById("authModal");
const loginBtn=document.getElementById("loginBtn");
const userInfo=document.getElementById("userInfo");
const userEmail=document.getElementById("userEmail");

loginBtn.onclick=()=>authModal.style.display="flex";

window.closeModal=()=>{
authModal.style.display="none";
}

/* ===========================
   REGISTER
=========================== */

window.register=()=>{
const email=document.getElementById("email").value;
const password=document.getElementById("password").value;

createUserWithEmailAndPassword(auth,email,password)
.then(()=>{
alert("Account Created ‚úÖ");
closeModal();
})
.catch(error=>{
alert(error.message);
});
}

/* ===========================
   LOGIN
=========================== */

window.login=()=>{
const email=document.getElementById("email").value;
const password=document.getElementById("password").value;

signInWithEmailAndPassword(auth,email,password)
.then(()=>{
alert("Login Success ‚úÖ");
closeModal();
})
.catch(error=>{
alert(error.message);
});
}

/* ===========================
   LOGOUT
=========================== */

window.logout=()=>{
signOut(auth);
}

/* ===========================
   AUTH STATE
=========================== */

onAuthStateChanged(auth,(user)=>{
if(user){
loginBtn.style.display="none";
userInfo.style.display="block";
userEmail.innerText=user.email;
}else{
loginBtn.style.display="block";
userInfo.style.display="none";
}
});

</script>

</body>
</html>
