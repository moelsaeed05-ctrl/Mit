<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>MIT STORE</title>

<style>
*{margin:0;padding:0;box-sizing:border-box;font-family:Arial;}
body{background:black;color:white;overflow:hidden;}

#space{position:fixed;inset:0;z-index:0;pointer-events:none;}

.logo{
position:absolute;top:20px;left:50%;
transform:translateX(-50%);
font-size:28px;letter-spacing:6px;z-index:10;
}

.loginBtn{
position:absolute;top:20px;right:20px;
background:#ffd700;color:black;
padding:6px 14px;border-radius:8px;
cursor:pointer;z-index:10;font-weight:bold;font-size:14px;
}

.closeX{
position:absolute;top:15px;left:15px;
font-size:22px;cursor:pointer;color:#ff4444;
}

.neonMessage{
position:fixed;top:50%;left:50%;
transform:translate(-50%,-50%);
padding:20px 40px;border-radius:15px;
background:#111;font-size:22px;display:none;
z-index:200;color:#00ffcc;text-align:center;
box-shadow:0 0 10px #00ffcc,0 0 20px #00ffcc,
0 0 40px #00ffcc,0 0 80px #00ffcc;
animation:fadeOut 3s forwards;
}
@keyframes fadeOut{0%{opacity:1;}80%{opacity:1;}100%{opacity:0;}}

.menu{
position:absolute;top:50%;left:50%;
transform:translate(-50%,-50%);
display:flex;flex-direction:column;
gap:35px;z-index:10;width:80%;
align-items:center;
}

.item{
cursor:pointer;font-size:22px;
padding:12px 30px;border-radius:12px;
transition:.4s;
}
.item:hover{text-shadow:0 0 10px #ffd700;}

.fullscreen{
position:fixed;inset:0;background:black;
display:none;flex-direction:column;
align-items:center;z-index:40;
padding-top:90px;overflow:auto;
}

.categoryTitle{
font-size:28px;
margin-bottom:20px;
letter-spacing:4px;
color:#00ffcc;
text-shadow:0 0 5px #00ffcc,0 0 10px #00ffcc,
0 0 20px #00ffcc,0 0 40px #00ffcc;
z-index:10;
}

.products{
display:flex;gap:20px;flex-wrap:wrap;
justify-content:center;width:95%;
position:relative;z-index:5;
}

.product{
background:#111;padding:12px;
border-radius:14px;width:140px;
cursor:pointer;transition:.4s;
}

.product img{
width:100%;border-radius:8px;
margin-bottom:8px;
}

.product:hover{
transform:scale(1.08);
box-shadow:0 0 10px #ffd700;
}

.smokeCanvas{
position:absolute;inset:0;
z-index:1;pointer-events:none;
}

.detail{
position:fixed;inset:0;
background:rgba(0,0,0,.95);
display:none;justify-content:center;
align-items:center;z-index:60;
}

.detailBox{
background:#111;padding:25px;
border-radius:18px;text-align:center;
width:300px;position:relative;
}

.loginModal{
position:fixed;inset:0;
background:rgba(0,0,0,.9);
display:none;justify-content:center;
align-items:center;z-index:80;
}

.loginBox{
background:#111;padding:30px;
border-radius:18px;width:340px;
text-align:center;position:relative;
box-shadow:0 0 20px rgba(0,255,200,.3);
}

.loginBox input{
width:100%;padding:10px;
margin:8px 0;border:none;
border-radius:6px;background:#222;
color:white;
}

.smallLink{
font-size:13px;color:#ffd700;
cursor:pointer;margin-top:8px;
display:block;
}

button{
padding:10px;margin-top:10px;
border:none;border-radius:8px;
background:#ffd700;cursor:pointer;
width:100%;font-weight:bold;
}

/* ===== PROFILE DESIGN ===== */
.profileAvatar{
width:80px;height:80px;
border-radius:50%;
background:linear-gradient(45deg,#ffd700,#00ffcc);
display:flex;align-items:center;
justify-content:center;
font-size:32px;font-weight:bold;
color:black;margin:10px auto;
}

.profileName{
font-size:18px;margin-top:10px;
color:#00ffcc;
}

.profileEmail{
font-size:14px;
opacity:.7;margin-top:5px;
}

.logoutBtn{
background:#ff4444;
color:white;
margin-top:15px;
}

.logoutBtn:hover{
background:#ff2222;
}

</style>
</head>

<body>

<canvas id="space"></canvas>
<div class="neonMessage" id="neonMsg"></div>

<div class="logo">
<span style="color:#ffd700">ğ”</span>
<span style="color:#ff1a1a">ğ”¦</span>
<span style="color:#ffd700">ğ”—</span>
</div>

<div class="loginBtn" id="loginBtn">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</div>

<div class="menu">
<div class="item" onclick="openCategory('HOODIES')">HOODIES</div>
<div class="item" onclick="openCategory('PANTS')">PANTS</div>
<div class="item" onclick="openCategory('ACCESSORIES')">ACCESSORIES</div>
</div>

<div class="loginModal" id="loginModal">
<div class="loginBox">
<div class="closeX" onclick="closeLogin()">âœ–</div>

<div id="loginForm">
<h3>ØªØ³Ø¬ÙŠÙ„ Ø¯Ø®ÙˆÙ„</h3>
<input type="email" id="emailInput" placeholder="Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ">
<input type="password" id="passwordInput" placeholder="ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±">
<button onclick="login()">ØªØ³Ø¬ÙŠÙ„ Ø¯Ø®ÙˆÙ„</button>
<span class="smallLink" onclick="showRegister()">Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨</span>
</div>

<div id="registerForm" style="display:none">
<h3>Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨</h3>
<input type="text" id="nameInput" placeholder="Ø§Ù„Ø§Ø³Ù… Ø¨Ø§Ù„ÙƒØ§Ù…Ù„">
<input type="email" id="regEmailInput" placeholder="Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ">
<input type="password" id="regPasswordInput" placeholder="ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±">
<input type="password" id="confirmInput" placeholder="ØªØ£ÙƒÙŠØ¯ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±">
<button onclick="register()">Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨</button>
<span class="smallLink" onclick="showLogin()">Ø±Ø¬ÙˆØ¹</span>
</div>

<!-- ===== PROFILE ===== -->
<div id="profileBox" style="display:none">
<div class="profileAvatar" id="avatarLetter"></div>
<div class="profileName" id="profileName"></div>
<div class="profileEmail" id="profileEmail"></div>
<button class="logoutBtn" onclick="logout()">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬</button>
<span class="smallLink" onclick="backToLogin()">Ø±Ø¬ÙˆØ¹</span>
</div>

</div>
</div>

<script type="module">

import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
import { getAuth,createUserWithEmailAndPassword,signInWithEmailAndPassword,onAuthStateChanged,signOut }
from "https://www.gstatic.com/firebasejs/10.12.2/firebase-auth.js";
import { getFirestore,doc,setDoc,getDoc }
from "https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";

const firebaseConfig={
apiKey:"YOUR_API",
authDomain:"YOUR_DOMAIN",
projectId:"YOUR_ID",
storageBucket:"YOUR_BUCKET",
messagingSenderId:"YOUR_SENDER",
appId:"YOUR_APPID"
};

const app=initializeApp(firebaseConfig);
const auth=getAuth(app);
const db=getFirestore(app);

loginBtn.onclick=()=>{
if(auth.currentUser){
openProfile();
}else{
openLogin();
}
};

window.logout=async function(){
await signOut(auth);
closeLogin();
showNeon("ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬");
};

function openProfile(){
loginForm.style.display="none";
registerForm.style.display="none";
profileBox.style.display="block";
loginModal.style.display="flex";
}

function backToLogin(){
profileBox.style.display="none";
loginForm.style.display="block";
}

onAuthStateChanged(auth,async(user)=>{
if(user){
const snap=await getDoc(doc(db,"users",user.uid));
let name=user.email;
if(snap.exists()) name=snap.data().name;
loginBtn.innerText=name;
profileName.innerText=name;
profileEmail.innerText=user.email;
avatarLetter.innerText=name.charAt(0).toUpperCase();
}else{
loginBtn.innerText="ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„";
profileBox.style.display="none";
}
});

window.openLogin=()=>loginModal.style.display="flex";
window.closeLogin=()=>loginModal.style.display="none";
window.showRegister=()=>{loginForm.style.display="none";registerForm.style.display="block";}
window.showLogin=()=>{registerForm.style.display="none";loginForm.style.display="block";}

</script>
</body>
  </html>
