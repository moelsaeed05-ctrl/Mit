<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>MIT STORE</title>

<style>
*{margin:0;padding:0;box-sizing:border-box;font-family:Arial, sans-serif;}
body{background:black;color:white;overflow-x:hidden; position: relative;}

/* Stars Canvas */
#space{position:fixed;inset:0;z-index:0;pointer-events:none;}

/* Logo */
.logo{
position:absolute;
top:30px;
left:50%;
transform:translateX(-50%);
font-size:28px;
letter-spacing:6px;
z-index:10;
}

/* Menu Icon */
.menuIcon {
position: fixed;
top: 25px;
right: 25px;
font-size: 30px;
cursor: pointer;
z-index: 100;
color: #ffd700;
}

/* Sidebar */
.sidebar {
position: fixed;
top: 0;
right: -280px;
width: 260px;
height: 100%;
background: rgba(15, 15, 15, 0.98);
backdrop-filter: blur(10px);
z-index: 200;
transition: 0.4s ease-in-out;
padding: 80px 20px;
box-shadow: -5px 0 20px rgba(0,0,0,0.8);
}
.sidebar.active { right: 0; }

.sideItem {
padding: 15px;
margin-bottom: 10px;
border-radius: 10px;
cursor: pointer;
font-size: 18px;
display: flex;
align-items: center;
gap: 15px;
transition: 0.3s;
background: rgba(255,255,255,0.05);
}
.sideItem:hover { background: #ffd700; color: black; }

/* Menu Sections */
.menu{
position:absolute;
top:55%; /* ØªÙ… ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ù…ÙˆØ¶Ø¹ Ù„ØªÙˆØ³ÙŠØ· Ø£ÙØ¶Ù„ */
left:50%;
transform:translate(-50%,-50%);
display:flex;
flex-direction:column;
gap:25px; /* Ù‚Ù„Ù„Øª Ø§Ù„Ù…Ø³Ø§ÙØ© Ø¹Ø´Ø§Ù† ØªØ¨Ù‚Ù‰ Ù…ØªÙ†Ø§Ø³Ù‚Ø© */
z-index:10;
width:80%;
align-items:center;
}

.item{
cursor:pointer;
font-size:24px;
padding:12px 20px;
transition:.4s;
border-bottom:2px solid transparent;
}
.item:hover{text-shadow:0 0 15px #ffd700; border-bottom: 2px solid #ffd700;}

/* Neon Message */
.neonMessage{
position:fixed;
top:50%;
left:50%;
transform:translate(-50%,-50%);
padding:20px 40px;
border-radius:15px;
background:#111;
font-size:20px;
display:none;
z-index:1000;
color:#00ffcc;
text-align:center;
box-shadow:0 0 20px #00ffcc;
}

/* Fullscreen Category Page */
.fullscreen{
position:fixed;
inset:0;
background:black;
display:none;
flex-direction:column;
align-items:center;
z-index:40;
padding-top:100px;
overflow:auto;
}

.products{
display:flex;
gap:20px;
flex-wrap:wrap;
justify-content:center;
width:95%;
z-index:5;
}

.product{
background:#111;
padding:12px;
border-radius:14px;
width:150px;
cursor:pointer;
transition:.4s;
text-align: center;
}
.product img{ width:100%; border-radius:8px; }
.product:hover{ transform:scale(1.05); box-shadow:0 0 15px #ffd700; }

.smokeCanvas{ position:absolute; inset:0; z-index:1; pointer-events:none; }

.detail{
position:fixed;
inset:0;
background:rgba(0,0,0,.9);
display:none;
justify-content:center;
align-items:center;
z-index:500;
}
.detailBox{ background:#111; padding:25px; border-radius:18px; text-align:center; width:320px; }

.loginModal{
position:fixed;
inset:0;
background:rgba(0,0,0,.9);
display:none;
justify-content:center;
align-items:center;
z-index:600;
}
.loginBox{ background:#111; padding:30px; border-radius:18px; width:320px; text-align:center; position:relative; }
.loginBox input{ width:100%; padding:12px; margin:8px 0; border-radius:6px; background:#222; color:white; border:none; text-align: center; }
button{ padding:12px; margin-top:10px; border:none; border-radius:8px; background:#ffd700; color: black; font-weight: bold; cursor:pointer; width:100%; }
.closeX{ position:absolute; top:15px; left:15px; font-size:25px; cursor:pointer; color:#ff4444; }
.categoryTitle{ font-size:26px; margin-bottom:20px; color: #ffd700;}
</style>
</head>

<body>

<canvas id="space"></canvas>
<div class="neonMessage" id="neonMsg"></div>

<div class="logo">
<span style="color:#ffd700">ğ”</span>
<span style="color:#ff1a1a">ğ”¦</span>
<span style="color:#ffd700">ğ”—</span>
</div>

<div class="menuIcon" onclick="toggleSidebar()">â˜°</div>

<div class="sidebar" id="sidebar">
    <div class="closeX" onclick="toggleSidebar()">Ã—</div>
    <div class="sidebarItems">
        <div class="sideItem" id="loginBtnSide" onclick="openLogin(); toggleSidebar()">
            <span>ğŸ‘¤</span> ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„
        </div>
        <div class="sideItem" onclick="showNeon('Ø§Ù„Ø³Ù„Ø© ÙØ§Ø±ØºØ© Ø­Ø§Ù„ÙŠØ§Ù‹'); toggleSidebar()">
            <span>ğŸ›’</span> Ø§Ù„Ø³Ù„Ø©
        </div>
        <div class="sideItem" onclick="showNeon('Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø·Ù„Ø¨Ø§Øª Ø³Ø§Ø¨Ù‚Ø©'); toggleSidebar()">
            <span>ğŸ“œ</span> Ø³Ø¬Ù„ Ø§Ù„Ø·Ù„Ø¨Ø§Øª
        </div>
        <div class="sideItem" id="logoutBtn" style="display:none" onclick="handleLogout()">
            <span>ğŸšª</span> ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬
        </div>
    </div>
</div>

<div class="menu">
<div class="item" onclick="openCategory('HOODIES')">HOODIES</div>
<div class="item" onclick="openCategory('PANTS')">PANTS</div>
<div class="item" onclick="openCategory('ACCESSORIES')">ACCESSORIES</div>
</div>

<div class="fullscreen" id="page">
<div class="closeX" onclick="goHome()">âœ–</div>
<canvas class="smokeCanvas" id="smoke"></canvas>
<div class="categoryTitle" id="categoryTitle"></div>
<div class="products" id="products"></div>
</div>

<div class="detail" id="detail">
<div class="detailBox" id="detailBox"></div>
</div>

<div class="loginModal" id="loginModal">
    <div class="loginBox">
        <div class="closeX" onclick="closeLogin()">âœ–</div>
        <div id="loginForm">
            <h3>ØªØ³Ø¬ÙŠÙ„ Ø¯Ø®ÙˆÙ„</h3>
            <input type="email" id="emailInput" placeholder="Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ">
            <input type="password" id="passwordInput" placeholder="ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±">
            <button onclick="login()">Ø¯Ø®ÙˆÙ„</button>
            <span style="color:#ffd700; cursor:pointer;" onclick="showRegister()">Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨</span>
        </div>
        <div id="registerForm" style="display:none">
            <h3>Ø­Ø³Ø§Ø¨ Ø¬Ø¯ÙŠØ¯</h3>
            <input type="text" id="nameInput" placeholder="Ø§Ù„Ø§Ø³Ù…">
            <input type="email" id="regEmailInput" placeholder="Ø§Ù„Ø§ÙŠÙ…ÙŠÙ„">
            <input type="password" id="regPasswordInput" placeholder="Ø§Ù„Ø¨Ø§Ø³ÙˆØ±Ø¯">
            <button onclick="register()">Ø¥Ù†Ø´Ø§Ø¡</button>
            <span style="color:#ffd700; cursor:pointer;" onclick="showLogin()">Ø±Ø¬ÙˆØ¹</span>
        </div>
    </div>
</div>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
import { getAuth,createUserWithEmailAndPassword,signInWithEmailAndPassword,onAuthStateChanged,signOut } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-auth.js";
import { getFirestore,doc,setDoc,getDoc } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";

const firebaseConfig={
    apiKey:"AIzaSyC6606N-AgsVjpUfubQa9ZRb7VjYtOZvCU",
    authDomain:"mit-store-15e1d.firebaseapp.com",
    projectId:"mit-store-15e1d",
    storageBucket:"mit-store-15e1d.firebasestorage.app",
    messagingSenderId:"168416523904",
    appId:"1:168416523904:web:6bd0ea50fc3e1c542e9865"
};

const app=initializeApp(firebaseConfig);
const auth=getAuth(app);
const db=getFirestore(app);

window.toggleSidebar = () => document.getElementById("sidebar").classList.toggle("active");
window.openLogin = () => loginModal.style.display="flex";
window.closeLogin = () => loginModal.style.display="none";
window.showRegister=()=>{loginForm.style.display="none";registerForm.style.display="block";}
window.showLogin=()=>{registerForm.style.display="none";loginForm.style.display="block";}
window.goHome=()=>{page.style.display="none";}

window.showNeon = function(text){
    const msg = document.getElementById("neonMsg");
    msg.innerText=text;
    msg.style.display="block";
    setTimeout(()=>{msg.style.display="none";},2500);
}

window.login=async function(){
    try{
        await signInWithEmailAndPassword(auth,emailInput.value,passwordInput.value);
        showNeon("Ø£Ù‡Ù„Ø§Ù‹ Ø¨Ùƒ Ù…Ø¬Ø¯Ø¯Ø§Ù‹");
        closeLogin();
    }catch(e){showNeon("Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª");}
}

// Register Function
window.register = async function(){
    const name = document.getElementById("nameInput").value;
    const email = document.getElementById("regEmailInput").value;
    const password = document.getElementById("regPasswordInput").value;

    if(!name || !email || !password){
        showNeon("Ø§Ù…Ù„Ø£ ÙƒÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª");
        return;
    }

    try{
        const userCredential = await createUserWithEmailAndPassword(auth,email,password);

        await setDoc(doc(db,"users",userCredential.user.uid),{
            name:name,
            email:email,
            createdAt:new Date()
        });

        showNeon("ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø­Ø³Ø§Ø¨ Ø¨Ù†Ø¬Ø§Ø­");
        closeLogin();

        document.getElementById("nameInput").value="";
        document.getElementById("regEmailInput").value="";
        document.getElementById("regPasswordInput").value="";

    }catch(error){
        if(error.code === "auth/email-already-in-use"){
            showNeon("Ø§Ù„Ø¥ÙŠÙ…ÙŠÙ„ Ù…Ø³ØªØ®Ø¯Ù… Ø¨Ø§Ù„ÙØ¹Ù„");
        }else if(error.code === "auth/weak-password"){
            showNeon("Ø§Ù„Ø¨Ø§Ø³ÙˆØ±Ø¯ Ø¶Ø¹ÙŠÙ (6 Ø£Ø­Ø±Ù Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„)");
        }else{
            showNeon("Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø­Ø³Ø§Ø¨");
        }
    }
}

window.handleLogout = async function() {
    await signOut(auth);
    showNeon("ØªÙ… Ø§Ù„Ø®Ø±ÙˆØ¬");
    toggleSidebar();
}

onAuthStateChanged(auth,async(user)=>{
    const loginBtnSide = document.getElementById("loginBtnSide");
    const logoutBtn = document.getElementById("logoutBtn");
    if(user){
        const snap=await getDoc(doc(db,"users",user.uid));
        loginBtnSide.innerHTML=`<span>ğŸ‘¤</span> ${snap.exists() ? snap.data().name : 'Ù…Ø³ØªØ®Ø¯Ù…'}`;
        logoutBtn.style.display="flex";
    }else{
        loginBtnSide.innerHTML=`<span>ğŸ‘¤</span> ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„`;
        logoutBtn.style.display="none";
    }
});

// Stars Animation
const canvas=document.getElementById("space");
const ctx=canvas.getContext("2d");
canvas.width=innerWidth; canvas.height=innerHeight;
let stars=[];
for(let i=0;i<200;i++) stars.push({x:Math.random()*canvas.width,y:Math.random()*canvas.height,s:Math.random()*0.5});
function animateStars(){
    ctx.clearRect(0,0,canvas.width,canvas.height);
    stars.forEach(st=>{ st.x-=st.s; if(st.x<0)st.x=canvas.width; ctx.fillStyle="white"; ctx.fillRect(st.x,st.y,1.2,1.2); });
    requestAnimationFrame(animateStars);
}
animateStars();

// Smoke Animation
const smokeCanvas=document.getElementById("smoke");
const smokeCtx=smokeCanvas.getContext("2d");
smokeCanvas.width=innerWidth; smokeCanvas.height=innerHeight;
let smokes=[];
function animateSmoke(){
    smokeCtx.clearRect(0,0,innerWidth,innerHeight);
    if(Math.random()<0.1) smokes.push({x:Math.random()*innerWidth,y:Math.random()*innerHeight,r:Math.random()*100+50,a:0.2});
    smokes.forEach((s,i)=>{
        s.a-=0.001;
        let g=smokeCtx.createRadialGradient(s.x,s.y,0,s.x,s.y,s.r);
        g.addColorStop(0,`rgba(100,100,100,${s.a})`);
        g.addColorStop(1,"transparent");
        smokeCtx.fillStyle=g; smokeCtx.beginPath(); smokeCtx.arc(s.x,s.y,s.r,0,Math.PI*2); smokeCtx.fill();
        if(s.a<=0)smokes.splice(i,1);
    });
    requestAnimationFrame(animateSmoke);
}
animateSmoke();

// Products Data
const data={
    HOODIES:[{name:"Black Hoodie",img:"https://images.unsplash.com/photo-1618354691373-d851c5c3a990",price:"50$"}],
    PANTS:[{name:"Black Pants",img:"https://images.unsplash.com/photo-1584865288642-42078afe6942",price:"40$"}],
    ACCESSORIES:[{name:"Cap",img:"https://images.unsplash.com/photo-1512436991641-6745cdb1723f",price:"20$"}]
};

window.openCategory=function(cat){
    page.style.display="flex";
    products.innerHTML="";
    categoryTitle.innerText=cat;
    data[cat].forEach(p=>{
        products.innerHTML+=`<div class="product" onclick='showDetail("${p.name}","${p.img}","${p.price}")'><img src="${p.img}"><div>${p.name}</div><div style="color:#ffd700">${p.price}</div></div>`;
    });
}

window.showDetail=function(n,i,p){
    detail.style.display="flex";
    detailBox.innerHTML=`
    <div class="closeX" onclick="detail.style.display='none'">âœ–</div>
    <img src="${i}" style="width:100%;border-radius:10px;">
    <h3 style="margin:10px 0">${n}</h3>
    <div style="color:#ffd700;font-size:20px;margin-bottom:10px">${p}</div>
    <button onclick="showNeon('ØªÙ…Øª Ø§Ù„Ø¥Ø¶Ø§ÙØ© Ù„Ù„Ø³Ù„Ø©')">Ø¥Ø¶Ø§ÙØ© Ø¥Ù„Ù‰ Ø§Ù„Ø³Ù„Ø©</button>`;
}
</script>
</body>
</html>
