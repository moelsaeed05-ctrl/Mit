<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>MIT Register</title>

<style>
body{
background:black;
color:white;
font-family:Arial;
display:flex;
justify-content:center;
align-items:center;
height:100vh;
}

.container{
background:#111;
padding:40px;
border-radius:20px;
width:350px;
display:flex;
flex-direction:column;
gap:15px;
}

input{
padding:10px;
border:none;
border-radius:10px;
}

button{
padding:10px;
border:none;
border-radius:10px;
background:#ffd700;
font-weight:bold;
cursor:pointer;
}
</style>
</head>

<body>

<div class="container" id="formBox">
<h2>Create Account</h2>

<input type="text" id="name" placeholder="Full Name">
<input type="text" id="phone" placeholder="Phone Number">
<input type="email" id="email" placeholder="Email">
<input type="password" id="password" placeholder="Password">
<input type="password" id="confirm" placeholder="Confirm Password">

<button onclick="register()">Register</button>
</div>

<script type="module">

import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
import { getAuth, createUserWithEmailAndPassword }
from "https://www.gstatic.com/firebasejs/10.12.2/firebase-auth.js";
import { getFirestore, setDoc, doc }
from "https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";

const firebaseConfig = {
  apiKey: "AIzaSyA1X_1BlviMDKKUGnA8yfG6NCrfS65h524",
  authDomain: "mit-store-bd580.firebaseapp.com",
  projectId: "mit-store-bd580",
  storageBucket: "mit-store-bd580.firebasestorage.app",
  messagingSenderId: "382577223227",
  appId: "1:382577223227:web:a04cab6663731c1106de1e"
};

const app = initializeApp(firebaseConfig);
const auth = getAuth(app);
const db = getFirestore(app);

window.register = async function(){

const name = document.getElementById("name").value;
const phone = document.getElementById("phone").value;
const email = document.getElementById("email").value;
const password = document.getElementById("password").value;
const confirm = document.getElementById("confirm").value;

if(password !== confirm){
alert("Passwords do not match");
return;
}

try{
const userCredential = await createUserWithEmailAndPassword(auth,email,password);
const user = userCredential.user;

await setDoc(doc(db,"users",user.uid),{
name:name,
phone:phone,
email:email
});

/* رسالة التأكيد */
document.body.innerHTML = `
<div style="display:flex;justify-content:center;align-items:center;height:100vh;background:black;color:#ffd700;font-size:28px;font-family:Arial;flex-direction:column;">
✅ تم تأكيد حسابك
<p style="color:white;font-size:16px;margin-top:10px;">جارٍ تحويلك للصفحة الرئيسية...</p>
</div>
`;

setTimeout(()=>{
window.location.href="index.html";
},2000);

}catch(error){
alert(error.message);
}
}

</script>
</body>
</html>
